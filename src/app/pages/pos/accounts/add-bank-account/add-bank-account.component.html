<!-- Page Header -->
<section class="page-header-section">
  <div class="page-header-card">
    <div class="header-content">
      <div class="header-title">
        <h1 class="page-title">
          <mat-icon class="title-icon">account_balance</mat-icon>
          {{id ? 'Edit Bank Account' : 'Add New Bank Account'}}
        </h1>
      </div>
      <div class="header-actions">
        <button
          type="button"
          routerLink="/pos/accounts/bank-account-list"
          mat-stroked-button
          class="back-btn">
          <mat-icon>arrow_back</mat-icon>
          <span>Back to List</span>
        </button>
      </div>
    </div>
  </div>
</section>

<!-- Main Form Section -->
<section class="form-section">
  <div class="form-container">
    <form
      #formElement="ngForm"
      [formGroup]="dataForm"
      (ngSubmit)="onSubmit()"
      class="bank-account-form">
      
      <!-- Basic Information -->
      <div class="form-section-card">
        <h3 class="section-title">Basic Information</h3>
        
        <div class="form-row">
          <div class="form-group">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Account Name <span class="required">*</span></mat-label>
              <input
                matInput
                formControlName="accountName"
                placeholder="Enter account name"
              />
              <mat-error *ngIf="dataForm.get('accountName')?.hasError('required')">
                Account name is required
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Account Number <span class="required">*</span></mat-label>
              <input
                matInput
                formControlName="accountNumber"
                placeholder="Enter account number"
              />
              <mat-error *ngIf="dataForm.get('accountNumber')?.hasError('required')">
                Account number is required
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Bank Name <span class="required">*</span></mat-label>
              <input
                matInput
                formControlName="bankName"
                placeholder="Enter bank name"
              />
              <mat-error *ngIf="dataForm.get('bankName')?.hasError('required')">
                Bank name is required
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Branch Name</mat-label>
              <input
                matInput
                formControlName="branchName"
                placeholder="Enter branch name"
              />
            </mat-form-field>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Account Type <span class="required">*</span></mat-label>
              <mat-select formControlName="accountType">
                <mat-option value="savings">Savings</mat-option>
                <mat-option value="current">Current</mat-option>
                <mat-option value="fixed_deposit">Fixed Deposit</mat-option>
                <mat-option value="other">Other</mat-option>
              </mat-select>
              <mat-error *ngIf="dataForm.get('accountType')?.hasError('required')">
                Account type is required
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Initial Balance</mat-label>
              <input
                matInput
                type="number"
                formControlName="initialBalance"
                placeholder="0.00"
                min="0"
              />
              <mat-error *ngIf="dataForm.get('initialBalance')?.hasError('min')">
                Balance cannot be negative
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Status <span class="required">*</span></mat-label>
              <mat-select formControlName="status">
                <mat-option value="active">Active</mat-option>
                <mat-option value="inactive">Inactive</mat-option>
                <mat-option value="closed">Closed</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group full-width">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Notes</mat-label>
              <textarea
                matInput
                formControlName="notes"
                rows="3"
                placeholder="Additional notes..."
              ></textarea>
            </mat-form-field>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="form-actions">
        <button
          type="button"
          routerLink="/pos/accounts/bank-account-list"
          mat-stroked-button
          [disabled]="disable">
          Cancel
        </button>
        <button
          type="submit"
          mat-raised-button
          color="primary"
          [disabled]="disable || dataForm.invalid">
          <mat-icon *ngIf="!disable">{{id ? 'update' : 'save'}}</mat-icon>
          <mat-spinner *ngIf="disable" diameter="20" class="inline-spinner"></mat-spinner>
          <span>{{id ? 'Update' : 'Save'}} Bank Account</span>
        </button>
      </div>
    </form>
  </div>
</section>


