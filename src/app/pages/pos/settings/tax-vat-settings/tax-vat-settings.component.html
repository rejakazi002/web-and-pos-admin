<!-- Page Header -->
<section class="page-header-section">
  <div class="page-header-card">
    <div class="header-content">
      <div class="header-title">
        <h1 class="page-title">
          <mat-icon class="title-icon">settings</mat-icon>
          Tax & VAT Settings
        </h1>
      </div>
    </div>
  </div>
</section>

<!-- Settings Form -->
<section class="form-section" *ngIf="!isLoading">
  <div class="form-container">
    <form [formGroup]="taxVatForm" (ngSubmit)="onSubmit()">
      <div class="settings-card">
        <h2>Configure Tax & VAT</h2>
        <p class="settings-description">Set default tax and VAT percentages for sales. Enable auto-calculation to automatically apply these percentages in new sales.</p>

        <div class="form-grid">
          <!-- VAT Settings -->
          <div class="settings-group">
            <h3>
              <mat-icon>receipt</mat-icon>
              VAT Settings
            </h3>
            
            <div class="form-group">
              <mat-label class="form-label">VAT Percentage (%)</mat-label>
              <mat-form-field appearance="outline">
                <input 
                  matInput 
                  type="number" 
                  formControlName="vatPercentage"
                  placeholder="0.00"
                  min="0"
                  max="100"
                  step="0.01"/>
                <mat-icon matPrefix>percent</mat-icon>
                <mat-error *ngIf="taxVatForm.get('vatPercentage')?.hasError('min')">
                  VAT percentage cannot be negative
                </mat-error>
                <mat-error *ngIf="taxVatForm.get('vatPercentage')?.hasError('max')">
                  VAT percentage cannot exceed 100%
                </mat-error>
              </mat-form-field>
            </div>

            <div class="form-group checkbox-group">
              <mat-checkbox formControlName="showVat">
                Show VAT field in sales
              </mat-checkbox>
              <p class="help-text">When enabled, VAT input field will be visible in the sales form.</p>
            </div>
            <div class="form-group checkbox-group">
              <mat-checkbox formControlName="isAutoCalculateVat">
                Auto-calculate VAT in sales
              </mat-checkbox>
              <p class="help-text">When enabled, VAT will be automatically calculated based on the percentage above when creating new sales.</p>
            </div>
          </div>

          <!-- Tax Settings -->
          <div class="settings-group">
            <h3>
              <mat-icon>account_balance</mat-icon>
              Tax Settings
            </h3>
            
            <div class="form-group">
              <mat-label class="form-label">Tax Percentage (%)</mat-label>
              <mat-form-field appearance="outline">
                <input 
                  matInput 
                  type="number" 
                  formControlName="taxPercentage"
                  placeholder="0.00"
                  min="0"
                  max="100"
                  step="0.01"/>
                <mat-icon matPrefix>percent</mat-icon>
                <mat-error *ngIf="taxVatForm.get('taxPercentage')?.hasError('min')">
                  Tax percentage cannot be negative
                </mat-error>
                <mat-error *ngIf="taxVatForm.get('taxPercentage')?.hasError('max')">
                  Tax percentage cannot exceed 100%
                </mat-error>
              </mat-form-field>
            </div>

            <div class="form-group checkbox-group">
              <mat-checkbox formControlName="showTax">
                Show Tax field in sales
              </mat-checkbox>
              <p class="help-text">When enabled, Tax input field will be visible in the sales form.</p>
            </div>
            <div class="form-group checkbox-group">
              <mat-checkbox formControlName="isAutoCalculateTax">
                Auto-calculate Tax in sales
              </mat-checkbox>
              <p class="help-text">When enabled, Tax will be automatically calculated based on the percentage above when creating new sales.</p>
            </div>
          </div>

          <!-- Service Charge Settings -->
          <div class="settings-group">
            <h3>
              <mat-icon>room_service</mat-icon>
              Service Charge Settings
            </h3>
            
            <div class="form-group checkbox-group">
              <mat-checkbox formControlName="showServiceCharge">
                Show Service Charge field in sales
              </mat-checkbox>
              <p class="help-text">When enabled, Service Charge input field will be visible in the sales form.</p>
            </div>
          </div>

          <!-- AIT Settings -->
          <div class="settings-group">
            <h3>
              <mat-icon>description</mat-icon>
              AIT (Advance Income Tax) Settings
            </h3>
            
            <div class="form-group checkbox-group">
              <mat-checkbox formControlName="showAit">
                Show AIT field in sales
              </mat-checkbox>
              <p class="help-text">When enabled, AIT (Advance Income Tax) input field will be visible in the sales form.</p>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button 
            type="submit" 
            mat-raised-button 
            color="primary"
            [disabled]="isLoading || taxVatForm.invalid">
            <mat-icon>save</mat-icon>
            <span>Save Settings</span>
          </button>
        </div>
      </div>
    </form>
  </div>
</section>

<app-page-loader *ngIf="isLoading"></app-page-loader>

