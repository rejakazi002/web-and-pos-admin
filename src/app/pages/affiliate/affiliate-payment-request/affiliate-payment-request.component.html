<div class="container">
  <div class="header">
<!--    <form class="table-search" #searchForm=ngForm>-->
<!--      <input type="text"-->
<!--             name="searchTerm"-->
<!--             autocomplete="off"-->
<!--             [(ngModel)]="searchQuery"-->
<!--             placeholder="Search">-->
<!--      @if (!searchQuery) {-->
<!--        <button>-->
<!--          <mat-icon>search</mat-icon>-->
<!--        </button>-->
<!--      } @else {-->
<!--        <button (click)="onClearSearch()">-->
<!--          <mat-icon>close</mat-icon>-->
<!--        </button>-->
<!--      }-->
<!--    </form> &lt;!&ndash; END! table-search &ndash;&gt;-->

  </div>

  <div class="left">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Affiliate Payment Request</mat-card-title>
      </mat-card-header>
    </mat-card>
  </div> <!-- END! left -->
  <div class="content">
    <div class="sub-content" >
      <div class="table-wrapper">

  <table>
    <tr class="td-border first-heading-row">
<!--      <th class="t-checkbox">-->
<!--        <mat-checkbox ></mat-checkbox>-->
<!--      </th>-->
<!--      <th>Image</th>-->
      <th>Affiliate Name</th>
      <th>Phone</th>
      <th>Amount</th>
<!--      <th>Note</th>-->
      <th>Status</th>
      <th>Requested Date</th>
      <th >Actions</th>
    </tr>
    <tr class="td-gap"></tr>
    @for (data of affiliatePaymentRequests | paginate: {
      itemsPerPage: dataPerPage,
      currentPage: currentPage,
      totalItems: totalData
    }; let i = $index; track data._id) {
    <ng-container>
      <tr class="td-border" >
<!--        <td class="t-checkbox">-->
<!--          <mat-checkbox-->
<!--            (click)="$event.stopPropagation()"-->
<!--            class="t-mat-checkbox">-->
<!--          </mat-checkbox>-->
<!--        </td>-->
<!--        <td class="img-wrapper">-->
<!--          <img class="table-image circle"-->
<!--               matTooltip="Click to preview image"-->

<!--               [src]="'/assets/images/png/placeholder.png'" [alt]="''">-->
<!--        </td>-->
        <td>
          <p>{{ data?.affiliate?.name }}</p>
        </td>
        <td>
          <p>{{ data.affiliate?.phoneNo }}</p>
        </td>
        <td>
          <p>{{ data.amount | number : '': 'bn'}}</p>
        </td>
<!--        <td>-->
<!--          <p>{{ data.note ?? '-' }}</p>-->
<!--        </td>-->
        <td>
          <p [style.color]="'red'">
            {{ data.status | titlecase}}
          </p>
        </td>
        <td>
          <p>{{ data?.dateString }}</p>
        </td>
        <td>
          <button mat-icon-button [matMenuTriggerFor]="tableMenu" (click)="$event.stopPropagation()">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #tableMenu="matMenu">
<!--            <button  mat-menu-item>-->
<!--              <mat-icon>edit</mat-icon>-->
<!--              Edit-->
<!--            </button>-->

            <button mat-menu-item (click)="openPaymentRequestDialog(data)">
              <mat-icon>add</mat-icon>
              Payment
            </button>

            <button  mat-menu-item
                     [routerLink]="['/', 'affiliate', 'payment-report-list']"
                     [queryParams]="{affiliate:data.affiliate._id, type:'withdrawal'}">


              <mat-icon>visibility</mat-icon>
              Payment Report List
            </button>

            <button  mat-menu-item
                     [routerLink]="['/', 'affiliate', 'affiliate-sale-report']"
                     [queryParams]="{affiliate:data.affiliate._id, type:'earning'}">

            <mat-icon>real_estate_agent</mat-icon>
              Sale Report List
            </button>

          </mat-menu>
        </td>
      </tr>
    </ng-container>}

  </table>
      </div> <!-- END! Table -->
  <div class="pagination-container">
    <pagination-controls
      class="data-pagination"
      [autoHide]="true"
      [maxSize]="15"
      (pageChange)="onPageChanged($event)">
    </pagination-controls>
  </div> <!-- END! pagination-container -->
    </div>
  </div> <!-- END! Content -->

</div>


